class <%= class_name %> < ActiveRecord::Migration

  def self.up
    create_table :report_caches, :force => true do |t|
      t.string   :model_name,       :null => false
      t.string   :report_name,      :null => false
      t.string   :report_grouping,  :null => false
      t.float    :value,            :null => false, :default => 0
      t.datetime :reporting_period, :null => false

      t.timestamps
    end
    add_index :report_caches, [
      :model_name,
      :report_name,
      :report_grouping
    ], :name => 'name_klass_grouping'
    add_index :report_caches, [
      :model_name, :report_name,
      :report_grouping,
      :reporting_period
    ], :unique => true, :name => 'report_caches_name_klass_grouping_period'
  end

  def self.down
    remove_index :report_caches, :name_klass_grouping
    remove_index :report_caches, :report_caches_name_klass_grouping_period

    drop_table :report_caches
  end

end
